mapscripts train_MapScripts{
    MAP_SCRIPT_ON_FRAME_TABLE [
        VAR_TEMP_0, 0: rivaux_train_1
        VAR_TEMP_0, 1 {
            lock
            msgbox("Retour du CDR.")
            setvar(VAR_TEMP_0, 2)
            release
        }
    ]
}

movement haut{
    face_up
}

movement bas{
    face_down
}

movement regard_droit{
    face_right
}

script sc_train{
    random(3)
    switch (var(VAR_RESULT)) {
        case 0: 
        msgbox(format("Je vous donne un petit cadeau, disons que c'est pour vous souhaiter bonne chance."))
        giveitem(ITEM_ROCKY_HELMET)
        case 1: msgbox(format("Salut les jeunes! C'est donc vous les trois boursiers dont tout le monde parle?"))
        case 2: msgbox(format("Surtout pensez à parler à tous les scientifiques avant de quitter le CDR, ils ont des choses à vous apprendre... voire vous donner."))
    }
    releaseall
    end
}

script rivaux_train_1{
  if (var(VAR_TEMP_0)==0){
    applymovement(10,bas)
    waitmovement(10)
    applymovement(11,haut)
    waitmovement(11)
    applymovement(OBJ_EVENT_ID_PLAYER, haut)
    waitmovement(OBJ_EVENT_ID_PLAYER)
    msgbox_mugshot(format("..."), MSGBOX_SIGN, MUGSHOT_MIDORI)
    msgbox_mugshot(format("Salut."), MSGBOX_SIGN, MUGSHOT_MIDORI)
    msgbox_mugshot(format("C'est toi le troisième boursier?"), MSGBOX_SIGN, MUGSHOT_MIDORI)
    applymovement(OBJ_EVENT_ID_PLAYER, bas)
    waitmovement(OBJ_EVENT_ID_PLAYER)
    msgbox(format("De toute évidence oui, autrement ce serait un scientifique. Oups, j'ai oublié de me présenter. Je m'appelle Lisa, tu peux m'appeler Liz si ça te chante. Je viens de la ville de Portokov et, avant de m'installer à Olnyris, j'habitais à Unys, à Maillard."))
    applymovement(OBJ_EVENT_ID_PLAYER, haut)
    waitmovement(OBJ_EVENT_ID_PLAYER)
    msgbox_mugshot(format("Moi c'est Midori. Moi aussi j'suis un expat, je viens de la région de Kanto."), MSGBOX_SIGN, MUGSHOT_MIDORI)
    applymovement(OBJ_EVENT_ID_PLAYER, bas)
    waitmovement(OBJ_EVENT_ID_PLAYER)
    msgbox(format("Lisa : Ma mère assiste la Prof. Keteleeria, c'est une grande dresseuse et c'est grâce à elle que je m'y connais bien en Pokémon."))
    applymovement(OBJ_EVENT_ID_PLAYER, haut)
    waitmovement(OBJ_EVENT_ID_PLAYER)
    msgbox_mugshot(format("Midori : Je suis le fils de l'ex-maître de la région de Kanto qui, aujourd'hui est le Champion de l'arène de Jadielle."), MSGBOX_SIGN, MUGSHOT_MIDORI)
    msgbox(format("........"))
    msgbox_mugshot(format("Midori : Ton père était le PDG de Vitalis Navitas?! Ouah la dinguerie!"), MSGBOX_SIGN, MUGSHOT_MIDORI)
    applymovement(OBJ_EVENT_ID_PLAYER, bas)
    waitmovement(OBJ_EVENT_ID_PLAYER)
    msgbox(format("Lisa : Tu dis était, sous-entendant ainsi qu'il n'a plus ce post. Pourquoi il a quitté son poste?"))
    msgbox(format("........."))
    msgbox(format("Lisa : Je suis désolé de l'apprendre."))
    applymovement(OBJ_EVENT_ID_PLAYER, haut)
    waitmovement(OBJ_EVENT_ID_PLAYER)
    msgbox_mugshot(format("Midori : Vous avez choisi quel Pokémon? Perso j'ai demandé un Coupenotte, j'ai toujours rêvé d'en avoir un."), MSGBOX_SIGN, MUGSHOT_MIDORI)
    applymovement(OBJ_EVENT_ID_PLAYER, bas)
    waitmovement(OBJ_EVENT_ID_PLAYER)
    msgbox(format("Lisa : Pour ma part, un Évoli, tellement de possibilités avec ce Pokémon! Et toi?"))
    msgbox(format("........."))
    msgbox(format("Tu n'en as pas demandé?! Mais... La date limite pour envoyer le mail c'était il y a une semaine! Ils doivent préparer les Pokémon à être reçus par leurs dresseurs. J'espère qu'ils en trouveront un pour toi."))
    applymovement(OBJ_EVENT_ID_PLAYER, haut)
    waitmovement(OBJ_EVENT_ID_PLAYER)
    msgbox_mugshot(format("Midori : Le train ralentit, je pense qu'on va bientôt arriver."), MSGBOX_SIGN, MUGSHOT_MIDORI)
    applymovement(OBJ_EVENT_ID_PLAYER, regard_droit)
    waitmovement(OBJ_EVENT_ID_PLAYER)
    playfanfare(FANFARE_RG_DEX_RATING)
    msgbox(format("{COLOR RED}{SHADOW LIGHT_RED}(jingle ENCF) Le train pour le CDR est arrivé à destination, veillez à ne pas oublier vos bagages."))
    waitfanfare
    fadescreen(1)
    msgbox(format("Agent : Bienvenue à la gare du Centre de Recherches, j'espère que le voyage n'a pas été trop long. Voici vos bagages. Bonne journée et au plaisir de vous revoir!"))
    warp(MAP_CDR_INT_GARE, 1)
    fadescreen(0)
    releaseall
    end
    setvar(VAR_TEMP_0,1)
}
}
